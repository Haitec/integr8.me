<ion-header>
  <ion-navbar>
    <ion-title>Dashboard</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-card *ngFor="let job of jobs">
    <ion-card-header (click)="toggleJob(job.id)" [ngClass]="{'closed': expandedJobId !== job.id, 'opened': expandedJobId === job.id}">
      <ion-icon name="arrow-forward" *ngIf="expandedJobId !== job.id"></ion-icon>
      <ion-icon name="arrow-down" *ngIf="expandedJobId === job.id"></ion-icon>
      {{ job.title }}
      <ion-icon float-right name="star" item-end [color]="job.favourite ? 'primary' : ''" [isActive]="job.favourite" (click)="favourite(!job.favourite, job.id)"></ion-icon>
      <br>
      <small>{{ job.company.name }}</small>
      <br>
      <progress [value]="job.score" max="100"></progress>
    </ion-card-header>

    <ion-list class="skills">
      <ion-item *ngFor="let skill of job.skills">
        {{ skill.name }}
        <br>
        <progress [value]="skill.score" max="100"></progress>
      </ion-item>
    </ion-list>
  </ion-card>

</ion-content>
